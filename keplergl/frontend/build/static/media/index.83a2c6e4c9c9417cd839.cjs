"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,s)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let n of __getOwnPropNames(t))__hasOwnProp.call(e,n)||n===r||__defProp(e,n,{get:()=>t[n],enumerable:!(s=__getOwnPropDesc(t,n))||s.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),src_exports={};__export(src_exports,{EXT_FEATURE_METADATA:()=>name3,EXT_MESH_FEATURES:()=>name,EXT_STRUCTURAL_METADATA:()=>name2,GLBLoader:()=>GLBLoader,GLBWriter:()=>GLBWriter,GLTFLoader:()=>GLTFLoader,GLTFScenegraph:()=>GLTFScenegraph,GLTFWriter:()=>GLTFWriter,_getMemoryUsageGLTF:()=>getMemoryUsageGLTF,postProcessGLTF:()=>postProcessGLTF}),module.exports=__toCommonJS(src_exports);var EXT_mesh_features_exports={};__export(EXT_mesh_features_exports,{decode:()=>decode,name:()=>name});var import_images=require("@loaders.gl/images"),import_loader_utils=require("@loaders.gl/loader-utils");function assert(e,t){if(!e)throw new Error(t||"assert failed: gltf")}var COMPONENTS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BYTES={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},MIPMAP_FACTOR=1.33,TYPES=["SCALAR","VEC2","VEC3","VEC4"],ARRAY_CONSTRUCTOR_TO_WEBGL_CONSTANT=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],ARRAY_TO_COMPONENT_TYPE=new Map(ARRAY_CONSTRUCTOR_TO_WEBGL_CONSTANT),ATTRIBUTE_TYPE_TO_COMPONENTS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function getAccessorTypeFromSize(e){return TYPES[e-1]||TYPES[0]}function getComponentTypeFromArray(e){const t=ARRAY_TO_COMPONENT_TYPE.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function getAccessorArrayTypeAndLength(e,t){const r=ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[e.componentType],s=ATTRIBUTE_TYPE_TO_COMPONENTS[e.type],n=ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[e.componentType],o=e.count*s,A=e.count*s*n;assert(A>=0&&A<=t.byteLength);return{ArrayType:r,length:o,byteLength:A,componentByteSize:BYTES[e.componentType],numberOfComponentsInElement:COMPONENTS[e.type]}}function getMemoryUsageGLTF(e){let{images:t,bufferViews:r}=e;t=t||[],r=r||[];const s=t.map((e=>e.bufferView));r=r.filter((e=>!s.includes(e)));const n=r.reduce(((e,t)=>e+t.byteLength),0),o=t.reduce(((e,t)=>{const{width:r,height:s}=t.image;return e+r*s}),0);return n+Math.ceil(4*o*MIPMAP_FACTOR)}function getTypedArrayForBufferView(e,t,r){const s=e.bufferViews[r];assert(s);const n=t[s.buffer];assert(n);const o=(s.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,o,s.byteLength)}function getTypedArrayForAccessor(e,t,r){var s,n;const o="number"===typeof r?null==(s=e.accessors)?void 0:s[r]:r;if(!o)throw new Error(`No gltf accessor ${JSON.stringify(r)}`);const A=null==(n=e.bufferViews)?void 0:n[o.bufferView||0];if(!A)throw new Error(`No gltf buffer view for accessor ${A}`);const{arrayBuffer:B,byteOffset:i}=t[A.buffer],a=(i||0)+(o.byteOffset||0)+(A.byteOffset||0),{ArrayType:c,length:C,componentByteSize:f,numberOfComponentsInElement:u}=getAccessorArrayTypeAndLength(o,A),E=f*u,d=A.byteStride||E;if("undefined"===typeof A.byteStride||A.byteStride===E){return new c(B,a,C)}const l=new c(C);for(let F=0;F<o.count;F++){const e=new c(B,a+F*d,u);l.set(e,F*u)}return l}function makeDefaultGLTFJson(){return{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]}}var GLTFScenegraph=class{constructor(e){this.gltf={json:(null==e?void 0:e.json)||makeDefaultGLTFJson(),buffers:(null==e?void 0:e.buffers)||[],images:(null==e?void 0:e.images)||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}hasExtension(e){const t=this.getUsedExtensions().find((t=>t===e)),r=this.getRequiredExtensions().find((t=>t===e));return"string"===typeof t||"string"===typeof r}getExtension(e){const t=this.getUsedExtensions().find((t=>t===e)),r=this.json.extensions||{};return t?r[e]:null}getRequiredExtension(e){return this.getRequiredExtensions().find((t=>t===e))?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"===typeof t)return t;const r=this.json[e]&&this.json[e][t];if(!r)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return r}getTypedArrayForBufferView(e){const t=(e=this.getBufferView(e)).buffer,r=this.gltf.buffers[t];assert(r);const s=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,s,e.byteLength)}getTypedArrayForAccessor(e){const t=this.getAccessor(e);return getTypedArrayForAccessor(this.gltf.json,this.gltf.buffers,t)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,s=t.byteOffset||0;return new Uint8Array(r,s,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,r){return e.extensions=e.extensions||{},e.extensions[t]=r,this.registerUsedExtension(t),this}setObjectExtension(e,t,r){(e.extensions||{})[t]=r}removeObjectExtension(e,t){const r=(null==e?void 0:e.extensions)||{};if(r[t]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const e=this.json.extensionsRemoved;e.includes(t)||e.push(t)}delete r[t]}addExtension(e,t={}){return assert(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return assert(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((t=>t===e))||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((t=>t===e))||this.json.extensionsRequired.push(e)}removeExtension(e){var t;if(null==(t=this.json.extensions)?void 0:t[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}this.json.extensions&&delete this.json.extensions[e],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:r}=e;this.json.nodes=this.json.nodes||[];const s={mesh:t};return r&&(s.matrix=r),this.json.nodes.push(s),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:r,material:s,mode:n=4}=e,o={primitives:[{attributes:this._addAttributes(t),mode:n}]};if(r){const e=this._addIndices(r);o.primitives[0].indices=e}return Number.isFinite(s)&&(o.primitives[0].material=s),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}addPointCloud(e){const t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}addImage(e,t){const r=(0,import_images.getBinaryImageMetadata)(e),s=t||(null==r?void 0:r.mimeType),n={bufferView:this.addBufferView(e),mimeType:s};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}addBufferView(e,t=0,r=this.byteLength){const s=e.byteLength;assert(Number.isFinite(s)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const n={buffer:t,byteOffset:r,byteLength:s};return this.byteLength+=(0,import_loader_utils.padToNBytes)(s,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(e,t){const r={bufferView:e,type:getAccessorTypeFromSize(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const r=this.addBufferView(e);let s={min:t.min,max:t.max};s.min&&s.max||(s=this._getAccessorMinMax(e,t.size));const n={size:t.size,componentType:getComponentTypeFromArray(e),count:Math.round(e.length/t.size),min:s.min,max:s.max};return this.addAccessor(r,Object.assign(n,t))}addTexture(e){const{imageIndex:t}=e,r={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const r=this.byteLength,s=new ArrayBuffer(r),n=new Uint8Array(s);let o=0;for(const A of this.sourceBuffers||[])o=(0,import_loader_utils.copyToArray)(A,n,o);(null==(t=null==(e=this.json)?void 0:e.buffers)?void 0:t[0])?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=s,this.sourceBuffers=[s]}_removeStringFromArray(e,t){let r=!0;for(;r;){const s=e.indexOf(t);s>-1?e.splice(s,1):r=!1}}_addAttributes(e={}){const t={};for(const r in e){const s=e[r],n=this._getGltfAttributeName(r),o=this.addBinaryBuffer(s.value,s);t[n]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const r={min:null,max:null};if(e.length<t)return r;r.min=[],r.max=[];const s=e.subarray(0,t);for(const n of s)r.min.push(n),r.max.push(n);for(let n=t;n<e.length;n+=t)for(let s=0;s<t;s++)r.min[0+s]=Math.min(r.min[0+s],e[n+s]),r.max[0+s]=Math.max(r.max[0+s],e[n+s]);return r}},import_images2=require("@loaders.gl/images");function emod(e){return(e%1+1)%1}var ATTRIBUTE_TYPE_TO_COMPONENTS2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY2={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE2={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function getArrayElementByteSize(e,t){return ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE2[t]*ATTRIBUTE_TYPE_TO_COMPONENTS2[e]}function getOffsetsForProperty(e,t,r,s){if("UINT8"!==r&&"UINT16"!==r&&"UINT32"!==r&&"UINT64"!==r)return null;const n=convertRawBufferToMetadataArray(e.getTypedArrayForBufferView(t),"SCALAR",r,s+1);return n instanceof BigInt64Array||n instanceof BigUint64Array?null:n}function convertRawBufferToMetadataArray(e,t,r,s=1){const n=ATTRIBUTE_TYPE_TO_COMPONENTS2[t],o=ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY2[r],A=ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE2[r],B=s*n,i=B*A;let a=e.buffer,c=e.byteOffset;if(c%A!==0){a=new Uint8Array(a).slice(c,c+i).buffer,c=0}return new o(a,c,B)}function getPrimitiveTextureData(e,t,r){var s,n,o,A,B;const i=`TEXCOORD_${t.texCoord||0}`,a=r.attributes[i],c=e.getTypedArrayForAccessor(a),C=e.gltf.json,f=t.index,u=null==(n=null==(s=C.textures)?void 0:s[f])?void 0:n.source;if("undefined"!==typeof u){const r=null==(A=null==(o=C.images)?void 0:o[u])?void 0:A.mimeType,s=null==(B=e.gltf.images)?void 0:B[u];if(s&&"undefined"!==typeof s.width){const e=[];for(let n=0;n<c.length;n+=2){const o=getImageValueByCoordinates(s,r,c,n,t.channels);e.push(o)}return e}}return[]}function primitivePropertyDataToAttributes(e,t,r,s,n){if(!(null==r?void 0:r.length))return;const o=[];for(const c of r){let e=s.findIndex((e=>e===c));-1===e&&(e=s.push(c)-1),o.push(e)}const A=new Uint32Array(o),B=e.gltf.buffers.push({arrayBuffer:A.buffer,byteOffset:A.byteOffset,byteLength:A.byteLength})-1,i=e.addBufferView(A,B,0),a=e.addAccessor(i,{size:1,componentType:getComponentTypeFromArray(A),count:A.length});n.attributes[t]=a}function getImageValueByCoordinates(e,t,r,s,n=[0]){const o={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},A=r[s],B=r[s+1];let i=1;!t||-1===t.indexOf("image/jpeg")&&-1===t.indexOf("image/png")||(i=4);const a=coordinatesToOffset(A,B,e,i);let c=0;for(const C of n){const t="number"===typeof C?Object.values(o)[C]:o[C],r=a+t.offset,s=(0,import_images2.getImageData)(e);if(s.data.length<=r)throw new Error(`${s.data.length} <= ${r}`);c|=s.data[r]<<t.shift}return c}function coordinatesToOffset(e,t,r,s=1){const n=r.width,o=emod(e)*(n-1),A=Math.round(o),B=r.height,i=emod(t)*(B-1);return(Math.round(i)*n+A)*(r.components?r.components:s)}function parseVariableLengthArrayNumeric(e,t,r,s,n){const o=[];for(let A=0;A<t;A++){const t=r[A],B=r[A+1]-r[A];if(B+t>s)break;const i=t/n,a=B/n;o.push(e.slice(i,i+a))}return o}function parseFixedLengthArrayNumeric(e,t,r){const s=[];for(let n=0;n<t;n++){const t=n*r;s.push(e.slice(t,t+r))}return s}function getPropertyDataString(e,t,r,s){if(r)throw new Error("Not implemented - arrayOffsets for strings is specified");if(s){const r=[],n=new TextDecoder("utf8");let o=0;for(let A=0;A<e;A++){const e=s[A+1]-s[A];if(e+o<=t.length){const s=t.subarray(o,e+o),A=n.decode(s);r.push(A),o+=e}}return r}return[]}var EXT_MESH_FEATURES_NAME="EXT_mesh_features",name=EXT_MESH_FEATURES_NAME;async function decode(e,t){decodeExtMeshFeatures(new GLTFScenegraph(e),t)}function decodeExtMeshFeatures(e,t){const r=e.gltf.json;if(r.meshes)for(const s of r.meshes)for(const r of s.primitives)processMeshPrimitiveFeatures(e,r,t)}function processMeshPrimitiveFeatures(e,t,r){var s,n,o;if(!(null==(s=null==r?void 0:r.gltf)?void 0:s.loadBuffers))return;const A=null==(n=t.extensions)?void 0:n[EXT_MESH_FEATURES_NAME],B=null==A?void 0:A.featureIds;if(B)for(const i of B){let s;if("undefined"!==typeof i.attribute){const r=`_FEATURE_ID_${i.attribute}`,n=t.attributes[r];s=e.getTypedArrayForAccessor(n)}else s="undefined"!==typeof i.texture&&(null==(o=null==r?void 0:r.gltf)?void 0:o.loadImages)?getPrimitiveTextureData(e,i.texture,t):[];i.data=s}}var EXT_structural_metadata_exports={};__export(EXT_structural_metadata_exports,{decode:()=>decode2,name:()=>name2});var EXT_STRUCTURAL_METADATA_NAME="EXT_structural_metadata",name2=EXT_STRUCTURAL_METADATA_NAME;async function decode2(e,t){decodeExtStructuralMetadata(new GLTFScenegraph(e),t)}function decodeExtStructuralMetadata(e,t){var r,s;if(!(null==(r=t.gltf)?void 0:r.loadBuffers))return;const n=e.getExtension(EXT_STRUCTURAL_METADATA_NAME);n&&((null==(s=t.gltf)?void 0:s.loadImages)&&decodePropertyTextures(e,n),decodePropertyTables(e,n))}function decodePropertyTextures(e,t){const r=t.propertyTextures,s=e.gltf.json;if(r&&s.meshes)for(const n of s.meshes)for(const s of n.primitives)processPrimitivePropertyTextures(e,r,s,t)}function decodePropertyTables(e,t){const r=t.schema;if(!r)return;const s=r.classes,n=t.propertyTables;if(s&&n)for(const o in s){const t=findPropertyTableByClass(n,o);t&&processPropertyTable(e,r,t)}}function findPropertyTableByClass(e,t){for(const r of e)if(r.class===t)return r;return null}function processPrimitivePropertyTextures(e,t,r,s){var n;if(!t)return;const o=null==(n=r.extensions)?void 0:n[EXT_STRUCTURAL_METADATA_NAME],A=null==o?void 0:o.propertyTextures;if(A)for(const B of A){processPrimitivePropertyTexture(e,t[B],r,s)}}function processPrimitivePropertyTexture(e,t,r,s){var n;if(!t.properties)return;s.dataAttributeNames||(s.dataAttributeNames=[]);const o=t.class;for(const A in t.properties){const B=`${o}_${A}`,i=null==(n=t.properties)?void 0:n[A];if(!i)continue;i.data||(i.data=[]);const a=i.data,c=getPrimitiveTextureData(e,i,r);null!==c&&(primitivePropertyDataToAttributes(e,B,c,a,r),i.data=a,s.dataAttributeNames.push(B))}}function processPropertyTable(e,t,r){var s,n;const o=null==(s=t.classes)?void 0:s[r.class];if(!o)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const A=r.count;for(const B in o.properties){const s=o.properties[B],i=null==(n=r.properties)?void 0:n[B];if(i){const r=getPropertyDataFromBinarySource(e,t,s,A,i);i.data=r}}}function getPropertyDataFromBinarySource(e,t,r,s,n){let o=[];const A=n.values,B=e.getTypedArrayForBufferView(A),i=getArrayOffsetsForProperty(e,r,n,s),a=getStringOffsetsForProperty(e,n,s);switch(r.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":o=getPropertyDataNumeric(r,s,B,i);break;case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${r.type}`);case"STRING":o=getPropertyDataString(s,B,i,a);break;case"ENUM":o=getPropertyDataENUM(t,r,s,B,i);break;default:throw new Error(`Unknown classProperty type ${r.type}`)}return o}function getArrayOffsetsForProperty(e,t,r,s){return t.array&&"undefined"===typeof t.count&&"undefined"!==typeof r.arrayOffsets?getOffsetsForProperty(e,r.arrayOffsets,r.arrayOffsetType||"UINT32",s):null}function getStringOffsetsForProperty(e,t,r){return"undefined"!==typeof t.stringOffsets?getOffsetsForProperty(e,t.stringOffsets,t.stringOffsetType||"UINT32",r):null}function getPropertyDataNumeric(e,t,r,s){const n=e.array,o=e.count,A=getArrayElementByteSize(e.type,e.componentType),B=r.byteLength/A;let i;return i=e.componentType?convertRawBufferToMetadataArray(r,e.type,e.componentType,B):r,n?s?parseVariableLengthArrayNumeric(i,t,s,r.length,A):o?parseFixedLengthArrayNumeric(i,t,o):[]:i}function getPropertyDataENUM(e,t,r,s,n){var o;const A=t.enumType;if(!A)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const B=null==(o=e.enums)?void 0:o[A];if(!B)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${A}`);const i=B.valueType||"UINT16",a=getArrayElementByteSize(t.type,i),c=s.byteLength/a;let C=convertRawBufferToMetadataArray(s,t.type,i,c);if(C||(C=s),t.array){if(n)return parseVariableLengthArrayENUM({valuesData:C,numberOfElements:r,arrayOffsets:n,valuesDataBytesLength:s.length,elementSize:a,enumEntry:B});const e=t.count;return e?parseFixedLengthArrayENUM(C,r,e,B):[]}return getEnumsArray(C,0,r,B)}function parseVariableLengthArrayENUM(e){const{valuesData:t,numberOfElements:r,arrayOffsets:s,valuesDataBytesLength:n,elementSize:o,enumEntry:A}=e,B=[];for(let i=0;i<r;i++){const e=s[i],r=s[i+1]-s[i];if(r+e>n)break;const a=getEnumsArray(t,e/o,r/o,A);B.push(a)}return B}function parseFixedLengthArrayENUM(e,t,r,s){const n=[];for(let o=0;o<t;o++){const t=getEnumsArray(e,r*o,r,s);n.push(t)}return n}function getEnumsArray(e,t,r,s){const n=[];for(let o=0;o<r;o++)if(e instanceof BigInt64Array||e instanceof BigUint64Array)n.push("");else{const r=getEnumByValue(s,e[t+o]);r?n.push(r.name):n.push("")}return n}function getEnumByValue(e,t){for(const r of e.values)if(r.value===t)return r;return null}var EXT_feature_metadata_exports={};__export(EXT_feature_metadata_exports,{decode:()=>decode3,name:()=>name3});var EXT_FEATURE_METADATA_NAME="EXT_feature_metadata",name3=EXT_FEATURE_METADATA_NAME;async function decode3(e,t){decodeExtFeatureMetadata(new GLTFScenegraph(e),t)}function decodeExtFeatureMetadata(e,t){var r,s;if(!(null==(r=t.gltf)?void 0:r.loadBuffers))return;const n=e.getExtension(EXT_FEATURE_METADATA_NAME);n&&((null==(s=t.gltf)?void 0:s.loadImages)&&decodePropertyTextures2(e,n),decodePropertyTables2(e,n))}function decodePropertyTextures2(e,t){const r=t.schema;if(!r)return;const s=r.classes,{featureTextures:n}=t;if(s&&n)for(const o in s){const t=s[o],r=findFeatureTextureByClass(n,o);r&&handleFeatureTextureProperties(e,r,t)}}function decodePropertyTables2(e,t){const r=t.schema;if(!r)return;const s=r.classes,n=t.featureTables;if(s&&n)for(const o in s){const t=findPropertyTableByClass2(n,o);t&&processPropertyTable2(e,r,t)}}function findPropertyTableByClass2(e,t){for(const r in e){const s=e[r];if(s.class===t)return s}return null}function findFeatureTextureByClass(e,t){for(const r in e){const s=e[r];if(s.class===t)return s}return null}function processPropertyTable2(e,t,r){var s,n;if(!r.class)return;const o=null==(s=t.classes)?void 0:s[r.class];if(!o)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const A=r.count;for(const B in o.properties){const s=o.properties[B],i=null==(n=r.properties)?void 0:n[B];if(i){const r=getPropertyDataFromBinarySource2(e,t,s,A,i);i.data=r}}}function handleFeatureTextureProperties(e,t,r){var s;const n=t.class;for(const o in r.properties){const r=null==(s=null==t?void 0:t.properties)?void 0:s[o];if(r){const t=getPropertyDataFromTexture(e,r,n);r.data=t}}}function getPropertyDataFromBinarySource2(e,t,r,s,n){let o=[];const A=n.bufferView,B=e.getTypedArrayForBufferView(A),i=getArrayOffsetsForProperty2(e,r,n,s),a=getStringOffsetsForProperty2(e,r,n,s);return"STRING"===r.type||"STRING"===r.componentType?o=getPropertyDataString(s,B,i,a):isNumericProperty(r)&&(o=getPropertyDataNumeric2(r,s,B,i)),o}function getArrayOffsetsForProperty2(e,t,r,s){return"ARRAY"===t.type&&"undefined"===typeof t.componentCount&&"undefined"!==typeof r.arrayOffsetBufferView?getOffsetsForProperty(e,r.arrayOffsetBufferView,r.offsetType||"UINT32",s):null}function getStringOffsetsForProperty2(e,t,r,s){return"undefined"!==typeof r.stringOffsetBufferView?getOffsetsForProperty(e,r.stringOffsetBufferView,r.offsetType||"UINT32",s):null}function isNumericProperty(e){const t=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return t.includes(e.type)||"undefined"!==typeof e.componentType&&t.includes(e.componentType)}function getPropertyDataNumeric2(e,t,r,s){const n="ARRAY"===e.type,o=e.componentCount,A="SCALAR",B=e.componentType||e.type,i=getArrayElementByteSize(A,B),a=convertRawBufferToMetadataArray(r,A,B,r.byteLength/i);return n?s?parseVariableLengthArrayNumeric(a,t,s,r.length,i):o?parseFixedLengthArrayNumeric(a,t,o):[]:a}function getPropertyDataFromTexture(e,t,r){const s=e.gltf.json;if(!s.meshes)return[];const n=[];for(const o of s.meshes)for(const s of o.primitives)processPrimitiveTextures(e,r,t,n,s);return n}function processPrimitiveTextures(e,t,r,s,n){const o=getPrimitiveTextureData(e,{channels:r.channels,...r.texture},n);o&&primitivePropertyDataToAttributes(e,t,o,s,n)}var VERSION="undefined"!==typeof __VERSION__?__VERSION__:"latest",import_loader_utils4=require("@loaders.gl/loader-utils"),import_images4=require("@loaders.gl/images"),import_textures=require("@loaders.gl/textures"),import_loader_utils2=require("@loaders.gl/loader-utils"),LITTLE_ENDIAN=!0,MAGIC_glTF=1735152710,GLB_FILE_HEADER_SIZE=12,GLB_CHUNK_HEADER_SIZE=8,GLB_CHUNK_TYPE_JSON=1313821514,GLB_CHUNK_TYPE_BIN=5130562,GLB_V1_CONTENT_FORMAT_JSON=0,GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED=0,GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED=1;function getMagicString(e,t=0){return`${String.fromCharCode(e.getUint8(t+0))}${String.fromCharCode(e.getUint8(t+1))}${String.fromCharCode(e.getUint8(t+2))}${String.fromCharCode(e.getUint8(t+3))}`}function isGLB(e,t=0,r={}){const s=new DataView(e),{magic:n=MAGIC_glTF}=r,o=s.getUint32(t,!1);return o===n||o===MAGIC_glTF}function parseGLBSync(e,t,r=0,s={}){const n=new DataView(t),o=getMagicString(n,r+0),A=n.getUint32(r+4,LITTLE_ENDIAN),B=n.getUint32(r+8,LITTLE_ENDIAN);switch(Object.assign(e,{header:{byteOffset:r,byteLength:B,hasBinChunk:!1},type:o,version:A,json:{},binChunks:[]}),r+=GLB_FILE_HEADER_SIZE,e.version){case 1:return parseGLBV1(e,n,r);case 2:return parseGLBV2(e,n,r,{});default:throw new Error(`Invalid GLB version ${e.version}. Only supports version 1 and 2.`)}}function parseGLBV1(e,t,r){(0,import_loader_utils2.assert)(e.header.byteLength>GLB_FILE_HEADER_SIZE+GLB_CHUNK_HEADER_SIZE);const s=t.getUint32(r+0,LITTLE_ENDIAN),n=t.getUint32(r+4,LITTLE_ENDIAN);return r+=GLB_CHUNK_HEADER_SIZE,(0,import_loader_utils2.assert)(n===GLB_V1_CONTENT_FORMAT_JSON),parseJSONChunk(e,t,r,s),r+=s,r+=parseBINChunk(e,t,r,e.header.byteLength)}function parseGLBV2(e,t,r,s){return(0,import_loader_utils2.assert)(e.header.byteLength>GLB_FILE_HEADER_SIZE+GLB_CHUNK_HEADER_SIZE),parseGLBChunksSync(e,t,r,s),r+e.header.byteLength}function parseGLBChunksSync(e,t,r,s){for(;r+8<=e.header.byteLength;){const n=t.getUint32(r+0,LITTLE_ENDIAN),o=t.getUint32(r+4,LITTLE_ENDIAN);switch(r+=GLB_CHUNK_HEADER_SIZE,o){case GLB_CHUNK_TYPE_JSON:parseJSONChunk(e,t,r,n);break;case GLB_CHUNK_TYPE_BIN:parseBINChunk(e,t,r,n);break;case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:s.strict||parseJSONChunk(e,t,r,n);break;case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:s.strict||parseBINChunk(e,t,r,n)}r+=(0,import_loader_utils2.padToNBytes)(n,4)}return r}function parseJSONChunk(e,t,r,s){const n=new Uint8Array(t.buffer,r,s),o=new TextDecoder("utf8").decode(n);return e.json=JSON.parse(o),(0,import_loader_utils2.padToNBytes)(s,4)}function parseBINChunk(e,t,r,s){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:r,byteLength:s,arrayBuffer:t.buffer}),(0,import_loader_utils2.padToNBytes)(s,4)}function resolveUrl(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;const r=t.baseUri||t.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${e}`);return r.substr(0,r.lastIndexOf("/")+1)+e}var EXT_meshopt_compression_exports={};__export(EXT_meshopt_compression_exports,{decode:()=>decode5,name:()=>name4});var wasmPromise,wasm_base="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",wasm_simd="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",detector=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),wasmpack=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),FILTERS={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},DECODERS={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function meshoptDecodeGltfBuffer(e,t,r,s,n,o="NONE"){const A=await loadWasmInstance();decode4(A,A.exports[DECODERS[n]],e,t,r,s,A.exports[FILTERS[o||"NONE"]])}async function loadWasmInstance(){return wasmPromise||(wasmPromise=loadWasmModule()),wasmPromise}async function loadWasmModule(){let e=wasm_base;WebAssembly.validate(detector)&&(e=wasm_simd,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const t=await WebAssembly.instantiate(unpack(e),{});return await t.instance.exports.__wasm_call_ctors(),t.instance}function unpack(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;++s){const r=e.charCodeAt(s);t[s]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let s=0;s<e.length;++s)t[r++]=t[s]<60?wasmpack[t[s]]:64*(t[s]-60)+t[++s];return t.buffer.slice(0,r)}function decode4(e,t,r,s,n,o,A){const B=e.exports.sbrk,i=s+3&-4,a=B(i*n),c=B(o.length),C=new Uint8Array(e.exports.memory.buffer);C.set(o,c);const f=t(a,s,n,c,o.length);if(0===f&&A&&A(a,i,n),r.set(C.subarray(a,a+s*n)),B(a-B(0)),0!==f)throw new Error(`Malformed buffer data: ${f}`)}var EXT_MESHOPT_COMPRESSION="EXT_meshopt_compression",name4=EXT_MESHOPT_COMPRESSION;async function decode5(e,t){var r,s;const n=new GLTFScenegraph(e);if(!(null==(r=null==t?void 0:t.gltf)?void 0:r.decompressMeshes)||!(null==(s=t.gltf)?void 0:s.loadBuffers))return;const o=[];for(const A of e.json.bufferViews||[])o.push(decodeMeshoptBufferView(n,A));await Promise.all(o),n.removeExtension(EXT_MESHOPT_COMPRESSION)}async function decodeMeshoptBufferView(e,t){const r=e.getObjectExtension(t,EXT_MESHOPT_COMPRESSION);if(r){const{byteOffset:s=0,byteLength:n=0,byteStride:o,count:A,mode:B,filter:i="NONE",buffer:a}=r,c=e.gltf.buffers[a],C=new Uint8Array(c.arrayBuffer,c.byteOffset+s,n),f=new Uint8Array(e.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength);await meshoptDecodeGltfBuffer(f,A,o,C,B,i),e.removeObjectExtension(t,EXT_MESHOPT_COMPRESSION)}}var EXT_texture_webp_exports={};__export(EXT_texture_webp_exports,{name:()=>name5,preprocess:()=>preprocess});var import_images3=require("@loaders.gl/images"),EXT_TEXTURE_WEBP="EXT_texture_webp",name5=EXT_TEXTURE_WEBP;function preprocess(e,t){const r=new GLTFScenegraph(e);if(!(0,import_images3.isImageFormatSupported)("image/webp")){if(r.getRequiredExtensions().includes(EXT_TEXTURE_WEBP))throw new Error(`gltf: Required extension ${EXT_TEXTURE_WEBP} not supported by browser`);return}const{json:s}=r;for(const n of s.textures||[]){const e=r.getObjectExtension(n,EXT_TEXTURE_WEBP);e&&(n.source=e.source),r.removeObjectExtension(n,EXT_TEXTURE_WEBP)}r.removeExtension(EXT_TEXTURE_WEBP)}var KHR_texture_basisu_exports={};__export(KHR_texture_basisu_exports,{name:()=>name6,preprocess:()=>preprocess2});var KHR_TEXTURE_BASISU="KHR_texture_basisu",name6=KHR_TEXTURE_BASISU;function preprocess2(e,t){const r=new GLTFScenegraph(e),{json:s}=r;for(const n of s.textures||[]){const e=r.getObjectExtension(n,KHR_TEXTURE_BASISU);e&&(n.source=e.source,r.removeObjectExtension(n,KHR_TEXTURE_BASISU))}r.removeExtension(KHR_TEXTURE_BASISU)}var KHR_draco_mesh_compression_exports={};__export(KHR_draco_mesh_compression_exports,{decode:()=>decode6,encode:()=>encode,name:()=>name7,preprocess:()=>preprocess3});var import_loader_utils3=require("@loaders.gl/loader-utils"),import_draco=require("@loaders.gl/draco");function getGLTFAccessors(e){const t={};for(const r in e){const s=e[r];if("indices"!==r){const e=getGLTFAccessor(s);t[r]=e}}return t}function getGLTFAccessor(e){const{buffer:t,size:r,count:s}=getAccessorData(e);return{value:t,size:r,byteOffset:0,count:s,type:getAccessorTypeFromSize(r),componentType:getComponentTypeFromArray(t)}}function getAccessorData(e){let t=e,r=1,s=0;return e&&e.value&&(t=e.value,r=e.size||1),t&&(ArrayBuffer.isView(t)||(t=toTypedArray(t,Float32Array)),s=t.length/r),{buffer:t,size:r,count:s}}function toTypedArray(e,t,r=!1){return e?Array.isArray(e)?new t(e):!r||e instanceof t?e:new t(e):null}var KHR_DRACO_MESH_COMPRESSION="KHR_draco_mesh_compression",name7=KHR_DRACO_MESH_COMPRESSION;function preprocess3(e,t,r){const s=new GLTFScenegraph(e);for(const n of makeMeshPrimitiveIterator(s))s.getObjectExtension(n,KHR_DRACO_MESH_COMPRESSION)}async function decode6(e,t,r){var s;if(!(null==(s=null==t?void 0:t.gltf)?void 0:s.decompressMeshes))return;const n=new GLTFScenegraph(e),o=[];for(const A of makeMeshPrimitiveIterator(n))n.getObjectExtension(A,KHR_DRACO_MESH_COMPRESSION)&&o.push(decompressPrimitive(n,A,t,r));await Promise.all(o),n.removeExtension(KHR_DRACO_MESH_COMPRESSION)}function encode(e,t={}){const r=new GLTFScenegraph(e);for(const s of r.json.meshes||[])compressMesh(s,t),r.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION)}async function decompressPrimitive(e,t,r,s){const n=e.getObjectExtension(t,KHR_DRACO_MESH_COMPRESSION);if(!n)return;const o=e.getTypedArrayForBufferView(n.bufferView),A=(0,import_loader_utils3.sliceArrayBuffer)(o.buffer,o.byteOffset),B={...r};delete B["3d-tiles"];const i=await(0,import_loader_utils3.parseFromContext)(A,import_draco.DracoLoader,B,s),a=getGLTFAccessors(i.attributes);for(const[c,C]of Object.entries(a))if(c in t.attributes){const r=t.attributes[c],s=e.getAccessor(r);(null==s?void 0:s.min)&&(null==s?void 0:s.max)&&(C.min=s.min,C.max=s.max)}t.attributes=a,i.indices&&(t.indices=getGLTFAccessor(i.indices)),e.removeObjectExtension(t,KHR_DRACO_MESH_COMPRESSION),checkPrimitive(t)}function compressMesh(e,t,r=4,s,n){var o;if(!s.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const A=s.DracoWriter.encodeSync({attributes:e}),B=null==(o=null==n?void 0:n.parseSync)?void 0:o.call(n,{attributes:e}),i=s._addFauxAttributes(B.attributes),a=s.addBufferView(A);return{primitives:[{attributes:i,mode:r,extensions:{[KHR_DRACO_MESH_COMPRESSION]:{bufferView:a,attributes:i}}}]}}function checkPrimitive(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*makeMeshPrimitiveIterator(e){for(const t of e.json.meshes||[])for(const e of t.primitives)yield e}var KHR_texture_transform_exports={};__export(KHR_texture_transform_exports,{decode:()=>decode7,name:()=>name8});var import_core=require("@math.gl/core"),EXT_MESHOPT_TRANSFORM="KHR_texture_transform",name8=EXT_MESHOPT_TRANSFORM,scratchVector=new import_core.Vector3,scratchRotationMatrix=new import_core.Matrix3,scratchScaleMatrix=new import_core.Matrix3;async function decode7(e,t){var r;if(!new GLTFScenegraph(e).hasExtension(EXT_MESHOPT_TRANSFORM)||!(null==(r=t.gltf)?void 0:r.loadBuffers))return;const s=e.json.materials||[];for(let n=0;n<s.length;n++)transformTexCoords(n,e)}function transformTexCoords(e,t){var r,s,n;const o=[],A=null==(r=t.json.materials)?void 0:r[e],B=null==(s=null==A?void 0:A.pbrMetallicRoughness)?void 0:s.baseColorTexture;B&&transformPrimitives(t,e,B,o);const i=null==A?void 0:A.emissiveTexture;i&&transformPrimitives(t,e,i,o);const a=null==A?void 0:A.normalTexture;a&&transformPrimitives(t,e,a,o);const c=null==A?void 0:A.occlusionTexture;c&&transformPrimitives(t,e,c,o);const C=null==(n=null==A?void 0:A.pbrMetallicRoughness)?void 0:n.metallicRoughnessTexture;C&&transformPrimitives(t,e,C,o)}function transformPrimitives(e,t,r,s){const n=getTransformParameters(r,s);if(!n)return;const o=e.json.meshes||[];for(const A of o)for(const r of A.primitives){const s=r.material;Number.isFinite(s)&&t===s&&transformPrimitive(e,r,n)}}function getTransformParameters(e,t){var r;const s=null==(r=e.extensions)?void 0:r[EXT_MESHOPT_TRANSFORM],{texCoord:n=0}=e,{texCoord:o=n}=s;if(!(-1!==t.findIndex((([e,t])=>e===n&&t===o)))){const r=makeTransformationMatrix(s);return n!==o&&(e.texCoord=o),t.push([n,o]),{originalTexCoord:n,texCoord:o,matrix:r}}return null}function transformPrimitive(e,t,r){var s,n;const{originalTexCoord:o,texCoord:A,matrix:B}=r,i=t.attributes[`TEXCOORD_${o}`];if(Number.isFinite(i)){const r=null==(s=e.json.accessors)?void 0:s[i];if(r&&r.bufferView){const s=null==(n=e.json.bufferViews)?void 0:n[r.bufferView];if(s){const{arrayBuffer:n,byteOffset:i}=e.buffers[s.buffer],a=(i||0)+(r.byteOffset||0)+(s.byteOffset||0),{ArrayType:c,length:C}=getAccessorArrayTypeAndLength(r,s),f=BYTES[r.componentType],u=COMPONENTS[r.type],E=s.byteStride||f*u,d=new Float32Array(C);for(let e=0;e<r.count;e++){const t=new c(n,a+e*E,2);scratchVector.set(t[0],t[1],1),scratchVector.transformByMatrix3(B),d.set([scratchVector[0],scratchVector[1]],e*u)}o===A?updateGltf(r,s,e.buffers,d):createAttribute(A,r,t,e,d)}}}}function updateGltf(e,t,r,s){e.componentType=5126,r.push({arrayBuffer:s.buffer,byteOffset:0,byteLength:s.buffer.byteLength}),t.buffer=r.length-1,t.byteLength=s.buffer.byteLength,t.byteOffset=0,delete t.byteStride}function createAttribute(e,t,r,s,n){s.buffers.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength});const o=s.json.bufferViews;if(!o)return;o.push({buffer:s.buffers.length-1,byteLength:n.buffer.byteLength,byteOffset:0});const A=s.json.accessors;A&&(A.push({bufferView:(null==o?void 0:o.length)-1,byteOffset:0,componentType:5126,count:t.count,type:"VEC2"}),r.attributes[`TEXCOORD_${e}`]=A.length-1)}function makeTransformationMatrix(e){const{offset:t=[0,0],rotation:r=0,scale:s=[1,1]}=e,n=(new import_core.Matrix3).set(1,0,0,0,1,0,t[0],t[1],1),o=scratchRotationMatrix.set(Math.cos(r),Math.sin(r),0,-Math.sin(r),Math.cos(r),0,0,0,1),A=scratchScaleMatrix.set(s[0],0,0,0,s[1],0,0,0,1);return n.multiplyRight(o).multiplyRight(A)}var KHR_lights_punctual_exports={};__export(KHR_lights_punctual_exports,{decode:()=>decode8,encode:()=>encode2,name:()=>name9});var KHR_LIGHTS_PUNCTUAL="KHR_lights_punctual",name9=KHR_LIGHTS_PUNCTUAL;async function decode8(e){const t=new GLTFScenegraph(e),{json:r}=t,s=t.getExtension(KHR_LIGHTS_PUNCTUAL);s&&(t.json.lights=s.lights,t.removeExtension(KHR_LIGHTS_PUNCTUAL));for(const n of r.nodes||[]){const e=t.getObjectExtension(n,KHR_LIGHTS_PUNCTUAL);e&&(n.light=e.light),t.removeObjectExtension(n,KHR_LIGHTS_PUNCTUAL)}}async function encode2(e){const t=new GLTFScenegraph(e),{json:r}=t;if(r.lights){const e=t.addExtension(KHR_LIGHTS_PUNCTUAL);assert(!e.lights),e.lights=r.lights,delete r.lights}if(t.json.lights){for(const e of t.json.lights){const r=e.node;t.addObjectExtension(r,KHR_LIGHTS_PUNCTUAL,e)}delete t.json.lights}}var KHR_materials_unlit_exports={};__export(KHR_materials_unlit_exports,{decode:()=>decode9,encode:()=>encode3,name:()=>name10});var KHR_MATERIALS_UNLIT="KHR_materials_unlit",name10=KHR_MATERIALS_UNLIT;async function decode9(e){const t=new GLTFScenegraph(e),{json:r}=t;for(const s of r.materials||[]){s.extensions&&s.extensions.KHR_materials_unlit&&(s.unlit=!0),t.removeObjectExtension(s,KHR_MATERIALS_UNLIT)}t.removeExtension(KHR_MATERIALS_UNLIT)}function encode3(e){const t=new GLTFScenegraph(e),{json:r}=t;if(t.materials)for(const s of r.materials||[])s.unlit&&(delete s.unlit,t.addObjectExtension(s,KHR_MATERIALS_UNLIT,{}),t.addExtension(KHR_MATERIALS_UNLIT))}var KHR_techniques_webgl_exports={};__export(KHR_techniques_webgl_exports,{decode:()=>decode10,encode:()=>encode4,name:()=>name11});var KHR_TECHNIQUES_WEBGL="KHR_techniques_webgl",name11=KHR_TECHNIQUES_WEBGL;async function decode10(e){const t=new GLTFScenegraph(e),{json:r}=t,s=t.getExtension(KHR_TECHNIQUES_WEBGL);if(s){const e=resolveTechniques(s,t);for(const s of r.materials||[]){const r=t.getObjectExtension(s,KHR_TECHNIQUES_WEBGL);r&&(s.technique=Object.assign({},r,e[r.technique]),s.technique.values=resolveValues(s.technique,t)),t.removeObjectExtension(s,KHR_TECHNIQUES_WEBGL)}t.removeExtension(KHR_TECHNIQUES_WEBGL)}}async function encode4(e,t){}function resolveTechniques(e,t){const{programs:r=[],shaders:s=[],techniques:n=[]}=e,o=new TextDecoder;return s.forEach((e=>{if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=o.decode(t.getTypedArrayForBufferView(e.bufferView))})),r.forEach((e=>{e.fragmentShader=s[e.fragmentShader],e.vertexShader=s[e.vertexShader]})),n.forEach((e=>{e.program=r[e.program]})),n}function resolveValues(e,t){const r=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((t=>{e.uniforms[t].value&&!(t in r)&&(r[t]=e.uniforms[t].value)})),Object.keys(r).forEach((e=>{"object"===typeof r[e]&&void 0!==r[e].index&&(r[e].texture=t.getTexture(r[e].index))})),r}var EXTENSIONS=[EXT_structural_metadata_exports,EXT_mesh_features_exports,EXT_meshopt_compression_exports,EXT_texture_webp_exports,KHR_texture_basisu_exports,KHR_draco_mesh_compression_exports,KHR_lights_punctual_exports,KHR_materials_unlit_exports,KHR_techniques_webgl_exports,KHR_texture_transform_exports,EXT_feature_metadata_exports];function preprocessExtensions(e,t={},r){var s;const n=EXTENSIONS.filter((e=>useExtension(e.name,t)));for(const o of n)null==(s=o.preprocess)||s.call(o,e,t,r)}async function decodeExtensions(e,t={},r){var s;const n=EXTENSIONS.filter((e=>useExtension(e.name,t)));for(const o of n)await(null==(s=o.decode)?void 0:s.call(o,e,t,r))}function useExtension(e,t){var r;const s=(null==(r=null==t?void 0:t.gltf)?void 0:r.excludeExtensions)||{};return!(e in s&&!s[e])}var KHR_BINARY_GLTF="KHR_binary_glTF";function preprocess4(e){const t=new GLTFScenegraph(e),{json:r}=t;for(const s of r.images||[]){const e=t.getObjectExtension(s,KHR_BINARY_GLTF);e&&Object.assign(s,e),t.removeObjectExtension(s,KHR_BINARY_GLTF)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,t.removeExtension(KHR_BINARY_GLTF)}var GLTF_ARRAYS={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},GLTF_KEYS={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},GLTFV1Normalizer=class{constructor(){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${r.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),preprocess4(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in GLTF_ARRAYS)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const r=e[t];if(r&&!Array.isArray(r)){e[t]=[];for(const s in r){const n=r[s];n.id=n.id||s;const o=e[t].length;e[t].push(n),this.idToIndexMap[t][s]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in GLTF_ARRAYS)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:e,indices:r,material:s}=t;for(const t in e)e[t]=this._convertIdToIndex(e[t],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map((e=>this._convertIdToIndex(e,"node")))),e.meshes&&(e.meshes=e.meshes.map((e=>this._convertIdToIndex(e,"mesh"))))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map((e=>this._convertIdToIndex(e,"node"))))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const r of e[t])for(const e in r){const t=r[e],s=this._convertIdToIndex(t,e);r[e]=s}}_convertIdToIndex(e,t){const r=GLTF_KEYS[t];if(r in this.idToIndexMap){const s=this.idToIndexMap[r][e];if(!Number.isFinite(s))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return s}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){var t,r,s;for(const n of e.materials){n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null==(t=n.values)?void 0:t.tex)||(null==(r=n.values)?void 0:r.texture2d_0)||(null==(s=n.values)?void 0:s.diffuseTex),A=e.textures.findIndex((e=>e.id===o));-1!==A&&(n.pbrMetallicRoughness.baseColorTexture={index:A})}}};function normalizeGLTFV1(e,t={}){return(new GLTFV1Normalizer).normalize(e,t)}async function parseGLTF(e,t,r=0,s,n){var o,A,B;return parseGLTFContainerSync(e,t,r,s),normalizeGLTFV1(e,{normalize:null==(o=null==s?void 0:s.gltf)?void 0:o.normalize}),preprocessExtensions(e,s,n),(null==(A=null==s?void 0:s.gltf)?void 0:A.loadBuffers)&&e.json.buffers&&await loadBuffers(e,s,n),(null==(B=null==s?void 0:s.gltf)?void 0:B.loadImages)&&await loadImages(e,s,n),await decodeExtensions(e,s,n),e}function parseGLTFContainerSync(e,t,r,s){if(s.uri&&(e.baseUri=s.uri),t instanceof ArrayBuffer&&!isGLB(t,r,s)){t=(new TextDecoder).decode(t)}if("string"===typeof t)e.json=(0,import_loader_utils4.parseJSON)(t);else if(t instanceof ArrayBuffer){const n={};r=parseGLBSync(n,t,r,s.glb),assert("glTF"===n.type,`Invalid GLB magic string ${n.type}`),e._glb=n,e.json=n.json}else assert(!1,"GLTF: must be ArrayBuffer or string");const n=e.json.buffers||[];if(e.buffers=new Array(n.length).fill(null),e._glb&&e._glb.header.hasBinChunk){const{binChunks:t}=e._glb;e.buffers[0]={arrayBuffer:t[0].arrayBuffer,byteOffset:t[0].byteOffset,byteLength:t[0].byteLength}}const o=e.json.images||[];e.images=new Array(o.length).fill({})}async function loadBuffers(e,t,r){var s,n;const o=e.json.buffers||[];for(let A=0;A<o.length;++A){const B=o[A];if(B.uri){const{fetch:o}=r;assert(o);const i=resolveUrl(B.uri,t),a=await(null==(s=null==r?void 0:r.fetch)?void 0:s.call(r,i)),c=await(null==(n=null==a?void 0:a.arrayBuffer)?void 0:n.call(a));e.buffers[A]={arrayBuffer:c,byteOffset:0,byteLength:c.byteLength},delete B.uri}else null===e.buffers[A]&&(e.buffers[A]={arrayBuffer:new ArrayBuffer(B.byteLength),byteOffset:0,byteLength:B.byteLength})}}async function loadImages(e,t,r){const s=getReferencesImageIndices(e),n=e.json.images||[],o=[];for(const A of s)o.push(loadImage(e,n[A],A,t,r));return await Promise.all(o)}function getReferencesImageIndices(e){const t=new Set,r=e.json.textures||[];for(const s of r)void 0!==s.source&&t.add(s.source);return Array.from(t).sort()}async function loadImage(e,t,r,s,n){let o;if(t.uri&&!t.hasOwnProperty("bufferView")){const e=resolveUrl(t.uri,s),{fetch:r}=n,A=await r(e);o=await A.arrayBuffer(),t.bufferView={data:o}}if(Number.isFinite(t.bufferView)){const r=getTypedArrayForBufferView(e.json,e.buffers,t.bufferView);o=(0,import_loader_utils4.sliceArrayBuffer)(r.buffer,r.byteOffset,r.byteLength)}assert(o,"glTF image has no data");let A=await(0,import_loader_utils4.parseFromContext)(o,[import_images4.ImageLoader,import_textures.BasisLoader],{...s,mimeType:t.mimeType,basis:s.basis||{format:(0,import_textures.selectSupportedBasisFormat)()}},n);A&&A[0]&&(A={compressed:!0,mipmaps:!1,width:A[0].width,height:A[0].height,data:A[0]}),e.images=e.images||[],e.images[r]=A}var GLTFLoader={name:"glTF",id:"gltf",module:"gltf",version:VERSION,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:parse,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}};async function parse(e,t={},r){(t={...GLTFLoader.options,...t}).gltf={...GLTFLoader.options.gltf,...t.gltf};const{byteOffset:s=0}=t;return await parseGLTF({},e,s,t,r)}var import_loader_utils5=require("@loaders.gl/loader-utils"),MAGIC_glTF2=1179937895,MAGIC_JSON=1313821514,MAGIC_BIN=5130562,LE=!0;function encodeGLBSync(e,t,r=0,s={}){const{magic:n=MAGIC_glTF2,version:o=2,json:A={},binary:B}=e,i=r;t&&(t.setUint32(r+0,n,LE),t.setUint32(r+4,o,LE),t.setUint32(r+8,0,LE));const a=r+8,c=r+=12;t&&(t.setUint32(r+0,0,LE),t.setUint32(r+4,MAGIC_JSON,LE)),r+=8;const C=JSON.stringify(A);if(r=(0,import_loader_utils5.copyPaddedStringToDataView)(t,r,C,4),t){const e=r-c-8;t.setUint32(c+0,e,LE)}if(B){const e=r;if(t&&(t.setUint32(r+0,0,LE),t.setUint32(r+4,MAGIC_BIN,LE)),r+=8,r=(0,import_loader_utils5.copyPaddedArrayBufferToDataView)(t,r,B,4),t){const s=r-e-8;t.setUint32(e+0,s,LE)}}if(t){const e=r-i;t.setUint32(a,e,LE)}return r}function encodeGLTFSync(e,t,r,s){return convertBuffersToBase64(e),encodeGLBSync(e,t,r,s)}function convertBuffersToBase64(e,{firstBuffer:t=0}={}){if(e.buffers&&e.buffers.length>t)throw new Error("encodeGLTF: multiple buffers not yet implemented")}var GLTFWriter={name:"glTF",id:"gltf",module:"gltf",version:VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,options:{gltf:{}},encode:async(e,t={})=>encodeSync(e,t),encodeSync:encodeSync};function encodeSync(e,t={}){const{byteOffset:r=0}=t,s=encodeGLTFSync(e,null,r,t),n=new ArrayBuffer(s);return encodeGLTFSync(e,new DataView(n),r,t),n}var GLBLoader={name:"GLB",id:"glb",module:"gltf",version:VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,parse:parse2,parseSync:parseSync,options:{glb:{strict:!1}}};async function parse2(e,t){return parseSync(e,t)}function parseSync(e,t){const{byteOffset:r=0}=t||{},s={};return parseGLBSync(s,e,r,null==t?void 0:t.glb),s}var GLBWriter={name:"GLB",id:"glb",module:"gltf",version:VERSION,extensions:["glb"],mimeTypes:["model/gltf-binary"],binary:!0,options:{glb:{}},encode:async(e,t={})=>encodeSync2(e,t),encodeSync:encodeSync2};function encodeSync2(e,t){const{byteOffset:r=0}=t,s=encodeGLBSync(e,null,r,t),n=new ArrayBuffer(s);return encodeGLBSync(e,new DataView(n),r,t),n}var COMPONENTS2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BYTES2={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},GL_SAMPLER={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},SAMPLER_PARAMETER_GLTF_TO_GL={magFilter:GL_SAMPLER.TEXTURE_MAG_FILTER,minFilter:GL_SAMPLER.TEXTURE_MIN_FILTER,wrapS:GL_SAMPLER.TEXTURE_WRAP_S,wrapT:GL_SAMPLER.TEXTURE_WRAP_T},DEFAULT_SAMPLER_PARAMETERS={[GL_SAMPLER.TEXTURE_MAG_FILTER]:GL_SAMPLER.LINEAR,[GL_SAMPLER.TEXTURE_MIN_FILTER]:GL_SAMPLER.NEAREST_MIPMAP_LINEAR,[GL_SAMPLER.TEXTURE_WRAP_S]:GL_SAMPLER.REPEAT,[GL_SAMPLER.TEXTURE_WRAP_T]:GL_SAMPLER.REPEAT};function makeDefaultSampler(){return{id:"default-sampler",parameters:DEFAULT_SAMPLER_PARAMETERS}}function getBytesFromComponentType(e){return BYTES2[e]}function getSizeFromAccessorType(e){return COMPONENTS2[e]}var GLTFPostProcessor=class{constructor(){this.baseUri="",this.buffers=[],this.images=[]}postProcess(e,t={}){const{json:r,buffers:s=[],images:n=[]}=e,{baseUri:o=""}=e;return assert(r),this.baseUri=o,this.buffers=s,this.images=n,this.jsonUnprocessed=r,this.json=this._resolveTree(e.json,t),this.json}_resolveTree(e,t={}){const r={...e};return this.json=r,e.bufferViews&&(r.bufferViews=e.bufferViews.map(((e,t)=>this._resolveBufferView(e,t)))),e.images&&(r.images=e.images.map(((e,t)=>this._resolveImage(e,t)))),e.samplers&&(r.samplers=e.samplers.map(((e,t)=>this._resolveSampler(e,t)))),e.textures&&(r.textures=e.textures.map(((e,t)=>this._resolveTexture(e,t)))),e.accessors&&(r.accessors=e.accessors.map(((e,t)=>this._resolveAccessor(e,t)))),e.materials&&(r.materials=e.materials.map(((e,t)=>this._resolveMaterial(e,t)))),e.meshes&&(r.meshes=e.meshes.map(((e,t)=>this._resolveMesh(e,t)))),e.nodes&&(r.nodes=e.nodes.map(((e,t)=>this._resolveNode(e,t))),r.nodes=r.nodes.map(((e,t)=>this._resolveNodeChildren(e)))),e.skins&&(r.skins=e.skins.map(((e,t)=>this._resolveSkin(e,t)))),e.scenes&&(r.scenes=e.scenes.map(((e,t)=>this._resolveScene(e,t)))),"number"===typeof this.json.scene&&r.scenes&&(r.scene=r.scenes[this.json.scene]),r}getScene(e){return this._get(this.json.scenes,e)}getNode(e){return this._get(this.json.nodes,e)}getSkin(e){return this._get(this.json.skins,e)}getMesh(e){return this._get(this.json.meshes,e)}getMaterial(e){return this._get(this.json.materials,e)}getAccessor(e){return this._get(this.json.accessors,e)}getCamera(e){return this._get(this.json.cameras,e)}getTexture(e){return this._get(this.json.textures,e)}getSampler(e){return this._get(this.json.samplers,e)}getImage(e){return this._get(this.json.images,e)}getBufferView(e){return this._get(this.json.bufferViews,e)}getBuffer(e){return this._get(this.json.buffers,e)}_get(e,t){if("object"===typeof t)return t;const r=e&&e[t];return r||console.warn(`glTF file error: Could not find ${e}[${t}]`),r}_resolveScene(e,t){return{...e,id:e.id||`scene-${t}`,nodes:(e.nodes||[]).map((e=>this.getNode(e)))}}_resolveNode(e,t){const r={...e,id:(null==e?void 0:e.id)||`node-${t}`};return void 0!==e.mesh&&(r.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(r.camera=this.getCamera(e.camera)),void 0!==e.skin&&(r.skin=this.getSkin(e.skin)),void 0!==e.meshes&&e.meshes.length&&(r.mesh=e.meshes.reduce(((e,t)=>{const r=this.getMesh(t);return e.id=r.id,e.primitives=e.primitives.concat(r.primitives),e}),{primitives:[]})),r}_resolveNodeChildren(e){return e.children&&(e.children=e.children.map((e=>this.getNode(e)))),e}_resolveSkin(e,t){const r="number"===typeof e.inverseBindMatrices?this.getAccessor(e.inverseBindMatrices):void 0;return{...e,id:e.id||`skin-${t}`,inverseBindMatrices:r}}_resolveMesh(e,t){const r={...e,id:e.id||`mesh-${t}`,primitives:[]};return e.primitives&&(r.primitives=e.primitives.map((e=>{const t={...e,attributes:{},indices:void 0,material:void 0},r=e.attributes;for(const s in r)t.attributes[s]=this.getAccessor(r[s]);return void 0!==e.indices&&(t.indices=this.getAccessor(e.indices)),void 0!==e.material&&(t.material=this.getMaterial(e.material)),t}))),r}_resolveMaterial(e,t){const r={...e,id:e.id||`material-${t}`};if(r.normalTexture&&(r.normalTexture={...r.normalTexture},r.normalTexture.texture=this.getTexture(r.normalTexture.index)),r.occlusionTexture&&(r.occlusionTexture={...r.occlusionTexture},r.occlusionTexture.texture=this.getTexture(r.occlusionTexture.index)),r.emissiveTexture&&(r.emissiveTexture={...r.emissiveTexture},r.emissiveTexture.texture=this.getTexture(r.emissiveTexture.index)),r.emissiveFactor||(r.emissiveFactor=r.emissiveTexture?[1,1,1]:[0,0,0]),r.pbrMetallicRoughness){r.pbrMetallicRoughness={...r.pbrMetallicRoughness};const e=r.pbrMetallicRoughness;e.baseColorTexture&&(e.baseColorTexture={...e.baseColorTexture},e.baseColorTexture.texture=this.getTexture(e.baseColorTexture.index)),e.metallicRoughnessTexture&&(e.metallicRoughnessTexture={...e.metallicRoughnessTexture},e.metallicRoughnessTexture.texture=this.getTexture(e.metallicRoughnessTexture.index))}return r}_resolveAccessor(e,t){const r=getBytesFromComponentType(e.componentType),s=getSizeFromAccessorType(e.type),n=r*s,o={...e,id:e.id||`accessor-${t}`,bytesPerComponent:r,components:s,bytesPerElement:n,value:void 0,bufferView:void 0,sparse:void 0};if(void 0!==e.bufferView&&(o.bufferView=this.getBufferView(e.bufferView)),o.bufferView){const e=o.bufferView.buffer,{ArrayType:t,byteLength:r}=getAccessorArrayTypeAndLength(o,o.bufferView),s=(o.bufferView.byteOffset||0)+(o.byteOffset||0)+e.byteOffset;let n=e.arrayBuffer.slice(s,s+r);o.bufferView.byteStride&&(n=this._getValueFromInterleavedBuffer(e,s,o.bufferView.byteStride,o.bytesPerElement,o.count)),o.value=new t(n)}return o}_getValueFromInterleavedBuffer(e,t,r,s,n){const o=new Uint8Array(n*s);for(let A=0;A<n;A++){const n=t+A*r;o.set(new Uint8Array(e.arrayBuffer.slice(n,n+s)),A*s)}return o.buffer}_resolveTexture(e,t){return{...e,id:e.id||`texture-${t}`,sampler:"number"===typeof e.sampler?this.getSampler(e.sampler):makeDefaultSampler(),source:"number"===typeof e.source?this.getImage(e.source):void 0}}_resolveSampler(e,t){const r={id:e.id||`sampler-${t}`,...e,parameters:{}};for(const s in r){const e=this._enumSamplerParameter(s);void 0!==e&&(r.parameters[e]=r[s])}return r}_enumSamplerParameter(e){return SAMPLER_PARAMETER_GLTF_TO_GL[e]}_resolveImage(e,t){const r={...e,id:e.id||`image-${t}`,image:null,bufferView:void 0!==e.bufferView?this.getBufferView(e.bufferView):void 0},s=this.images[t];return s&&(r.image=s),r}_resolveBufferView(e,t){const r=e.buffer,s=this.buffers[r].arrayBuffer;let n=this.buffers[r].byteOffset||0;e.byteOffset&&(n+=e.byteOffset);return{id:`bufferView-${t}`,...e,buffer:this.buffers[r],data:new Uint8Array(s,n,e.byteLength)}}_resolveCamera(e,t){const r={...e,id:e.id||`camera-${t}`};return r.perspective,r.orthographic,r}};function postProcessGLTF(e,t){return(new GLTFPostProcessor).postProcess(e,t)}